<!DOCTYPE>
<html>
<head>
	<link href="../static/crickit.css" rel="stylesheet">
</head>

<body >
	<!-- test line -->
	<div id="test_box"> </div>
	<br><br><br><br><br><br><br><br>
	<div id="start_chirp_div">
		<!-- <br><br><br><br><br><br><br><br><br> -->
		<form action="/chirp">
			<input type="radio" name="user_choice" value="use_user_location"> Get temperature for my location
			<br><br>
			<input type="radio" name="user_choice" value="use_user_temperature"> Use this temperature:
			<input type="text" name="user_input" id="temp_input">
			<br><br>
			<input type="submit" id="start_chirping_button" value="Chirp">
		</form>
	</div>

	<div id="stop_chirp_div">
		<!-- <br><br><br><br><br><br><br><br><br> -->
		<form action="/crickit">
			<input type="submit" id="stop_chirping_button" value="Stop Chirping">
		</form>
		
		<!-- test lines -->
		<!-- <p>{{ chirp_time }} between each chirp</p> -->
	</div>

	<ul>
		{% for message in get_flashed_messages() %}
			<li> {{ message }} </li>
		{% endfor %}
	</ul>

</body>
<script src="https://code.jquery.com/jquery.js"> </script>
<!-- <script src="/static/crickit.js"></script> -->


<script>
console.log("im in the script");
var start_chirp = document.getElementById("start_chirp_div");
var stop_chirp = document.getElementById("stop_chirp_div");
$(start_chirp).show();
$(stop_chirp).hide();

var stop_button = document.getElementById("stop_chirping_button");
var start_button = document.getElementById("start_chirping_button");

//$('#start_chirp_div').hide();

function got_chirp_info(chirp_time) {
	stop_chirp.setAttribute("display", "block");
	$('#test_box').html("randomly running unused function WTF")
};


function startChirping(evt) {
	//doesn't submit, toggle start/stop. Passes user input to .py
	//later, does stuff to make chirp noise or calls helper function
	console.log("got into startChirping");
	//don't submit
	evt.preventDefault();
	//toggle start stop
	$(start_chirp).toggle();
	$(stop_chirp).toggle();
	//$('#start_chirp_div').hide(); //using declared names and toggle instead
	var test_info = $("#temp_input").val();
	console.log(test_info);
	// eventually want to pass both choice and info, maybe as dictionary?
	//var info = {"user_choice": $("input[name=user_choice]:checked").val(), "temp": $("#temp_input").val()};

	$.get('/chirp', test_info, function(test_info){
		console.log(test_info);
	});
	//$.get('/chirp', info, got_chirp_info(chirp_time));
};


function stopChirping(evt) { 
	//doesn't submit, hides stop and shows start. 
	evt.preventDefault();
	$(start_chirp).toggle();
	$(stop_chirp).toggle();
};
	

$(start_button).on('click', startChirping);
//$("#start_chirping_button").on('submit', startChirping);
$("#stop_chirping_button").on('submit', stopChirping);

</script>

</html>